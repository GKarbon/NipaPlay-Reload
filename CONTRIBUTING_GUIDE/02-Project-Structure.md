# 2. 探索项目结构

欢迎来到 NipaPlay-Reload 的代码世界！第一次看到这么多文件和文件夹可能会让你感到有些困惑，但这很正常。本章节将像一张地图，带你了解项目中最重要的部分，让你知道哪里是做什么的。

当你用 Cursor 或 VS Code 打开项目后，你会在左侧看到项目的文件树。我们主要关心的是 `lib` 文件夹，因为我们应用绝大部分的核心代码都在这里。

## `lib` 文件夹：应用的核心

`lib` 文件夹是所有 Dart 代码的家。你可以把它想象成一座大厦的设计蓝图和功能模块所在。下面我们来看看里面的一些关键子文件夹：

*   `lib/`
    *   `main.dart`: 这是整个应用的入口文件，就像是房子的总开关。程序从这里开始运行。
    *   `pages/`: 这个文件夹存放了应用中所有的“页面”或“屏幕”。比如，主页、设置页、视频详情页等，每一个页面的代码都在这里。如果你想修改某个页面的外观或者添加新页面，来这里就对了。
    *   `widgets/`: “Widget”是 Flutter 中构建用户界面的基本单元，可以理解为一个个小的“零件”，比如按钮、卡片、列表项等。我们将一些通用的、可复用的零件放在这里，方便在不同页面中调用。
    *   `models/`: 这个文件夹存放了应用的数据结构定义。比如，一个视频可能包含标题、封面图片地址、时长等信息，我们就会在这里定义一个“视频模型”来描述这些数据。
    *   `controllers/` 或 `providers/`: 这里存放的是应用的“大脑”，负责处理业务逻辑。比如，当用户点击“播放”按钮后，具体执行加载视频、更新播放状态等操作的代码就在这里。它们是连接用户界面 (`pages/`) 和数据 (`models/`) 的桥梁。
    *   `services/`: 用于处理与外部世界的交互，比如从网络API获取视频数据、读写本地文件等。所有“脏活累活”都交给它们。
    *   `utils/`: 存放一些通用的工具类或函数，比如日期格式化、颜色定义等，方便在项目的任何地方使用。

### 一个简单的例子

假设我们想修改主页上视频卡片的显示样式。根据上面的介绍，你应该能猜到修改的流程：

1.  首先，我们会在 `pages/` 里面找到主页对应的文件，比如 `dashboard_home_page.dart`。
2.  在主页文件里，我们会看到它可能引用了一个通用的视频卡片“零件”，这个零件可能定义在 `widgets/` 文件夹下的某个文件里，比如 `anime_card.dart`。
3.  打开 `anime_card.dart`，我们就可以修改它的布局、颜色、字体大小等样式了。
4.  这个卡片显示的数据（如视频标题）是从哪里来的呢？它很可能是通过一个在 `models/` 中定义的“视频模型”传递过来的。

通过这个例子，你应该对代码的组织方式有了初步的了解。

## 其他重要文件夹

除了 `lib` 之外，还有一些文件夹你也需要了解：

*   `assets/`: 存放应用需要用到的静态资源，比如图片、图标、字体文件等。如果你想给应用换个 Logo，图片文件就放在这里。
*   `android/` 和 `ios/`: 这两个文件夹分别包含了构建 Android 和 iOS 应用所需的原生平台代码。通常情况下，你不需要修改这里面的东西，除非你需要添加一些需要原生平台支持的特殊功能。
*   `pubspec.yaml`: 这是 Flutter 项目的配置文件，非常重要。它列出了项目的所有依赖项（比如用到的第三方库）、应用的版本号、名称等信息。当你需要添加一个新的功能库时，就需要编辑这个文件。

## 如何利用 AI 工具来辅助理解？

当你对某一段代码感到困惑时，别忘了你的 AI 助手！在 Cursor 编辑器中，你可以：

1.  **选中一段代码**：选中你看不懂的函数、变量或者一整个文件。
2.  **按下 `Cmd + K` (macOS) 或 `Ctrl + K` (Windows/Linux)**。
3.  **在弹出的输入框中提问**：“请用中文解释这段代码是做什么的？”或者“这个函数在什么场景下会被调用？”。

AI 会给你一个详细的解释，帮助你快速理解代码的意图和逻辑。这是学习和贡献代码的强大武器。

## 总结

现在你已经对 NipaPlay-Reload 的项目结构有了基本的认识。记住，最重要的代码都在 `lib` 文件夹中。当你接到一个任务，比如“在设置页面增加一个选项”，你首先就应该去 `lib/pages/settings/` 目录下寻找相关文件。

在下一章节，我们将正式开始讲解如何进行一次完整的代码贡献流程。

---

**⬅️ 上一篇: [1. 准备你的开发环境](01-Environment-Setup.md)** | **➡️ 下一篇: [3. 贡献代码的标准流程](03-How-To-Contribute.md)**
